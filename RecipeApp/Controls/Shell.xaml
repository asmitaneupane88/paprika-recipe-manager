<pages:NavigatorPage
    x:Class="RecipeApp.Controls.Shell"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:utu="using:Uno.Toolkit.UI"
    xmlns:models="clr-namespace:RecipeApp.Models"
    xmlns:pages="clr-namespace:RecipeApp.Controls.Pages">

    <Grid utu:SafeArea.Insets="VisibleBounds">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Title Bar -->
        <Grid Grid.Row="0" Background="{ThemeResource SurfaceVariantColor}" Height="48">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button Grid.Column="0" Margin="5" Click="ButtonMenu_OnClick" Visibility="{x:Bind NavbarVisibility, Mode=OneWay}">
                <SymbolIcon Symbol="GlobalNavigationButton"/>
            </Button>
            <Button Grid.Column="1" Margin="5" Click="ButtonBack_OnClick" Visibility="{x:Bind BackVisibility, Mode=OneWay}">
                <SymbolIcon Symbol="Back"/>
            </Button>
            <TextBlock Grid.Column="2"
                       Text="{x:Bind Navigator.CurrentTitle, Mode=OneWay}"
                       VerticalAlignment="Center" FontSize="20" Margin="16,0,0,0"/>
        </Grid>

        <!-- Holds the flyout menu for navigation and a container for the page -->
        <NavigationView x:Name="Navbar" Grid.Row="1" PaneDisplayMode="LeftMinimal"
                        IsBackButtonVisible="Collapsed"
                        IsPaneToggleButtonVisible="False"
                        IsSettingsVisible="False"
                        MenuItemsSource="{x:Bind RoutesAvailable, Mode=OneWay}"
                        ItemInvoked="NavigationView_OnItemInvoked">

            <NavigationView.MenuItemTemplate>
                <DataTemplate x:DataType="models:Route">
                    <NavigationViewItem Content="{x:Bind Name}" Tag="{x:Bind}">
                        <NavigationViewItem.Icon>
                            <SymbolIcon Symbol="{x:Bind Icon}"/>
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                </DataTemplate>
            </NavigationView.MenuItemTemplate>

            <!-- Page Container -->
            <Frame Content="{x:Bind Navigator.CurrentPage, Mode=OneWay}"/>

        </NavigationView>
    </Grid>
</pages:NavigatorPage>
